# 🚀 v3.0.3 – AutoExport SoM Labels & Manifest
**Release date:** 2025-10-29 UTC  
**Branch:** `main`  
**Participant/Snapshot:** P000001 / 2025-09-29

## 🔧 Summary
- Added Apple Health **AutoExport State of Mind (SoM)** ingestion and daily label composition.
- Introduced manifest field `real_labels` and expanded counts by source.
- No breaking changes; re-run `make etl-extract` and `make labels` to refresh labels.

## 🧩 Highlights
- AutoExport SoM parser detects latest `StateOfMind-*.csv` under `data/raw/.../apple/autoexport/`.
- Writes normalized file `apple_state_of_mind_autoexport.csv` atomically.
- Label precedence: **apple_autoexport → apple_cda → zepp → synthetic**.
- `labels_manifest.json` now includes:
  - `real_labels`
  - `counts_by_source`
  - `files_used`
- ASCII-only logs; idempotent writes preserved.

## 📊 Label Stats (from labels_manifest.json)
- `dates_total`: **1313**  
- `real_labels`: **54**  
- `counts_by_source`: {apple_autoexport: 54, apple_cda: 0, zepp: 0, synthetic: 1259}

## 📁 Artifacts
| File | Exists | Size | SHA256 |
|---|---:|---:|---|
| apple_state_of_mind_autoexport.csv | ✅ | 5750 bytes | `2bac8a1a7ae8e0153b386a3f0b1787bde39a10fb01bee88882597484f9878716` |
| apple_state_of_mind.csv | ✅ | 18533 bytes | `73564f468820e30be9ea94cc541d99a466d59be16518f621626feacfe23bc961` |

## 🧪 Impact on NB2
- Baselines unchanged; 54 real labels now available for training.
- Expect fewer single-class folds and improved class distribution metrics.

## 🔄 Upgrade Notes
1. Copy `StateOfMind-*.csv` to `data/raw/P000001/apple/autoexport/`.
2. Run:

```
make etl-extract PARTICIPANT=P000001 SNAPSHOT=2025-09-29
make labels PARTICIPANT=P000001 SNAPSHOT=2025-09-29
make nb2-run PARTICIPANT=P000001
```

3. Verify manifest at `data/etl/P000001/snapshots/2025-09-29/labels_manifest.json`.

## 📝 Changelog
Commits since `v3.0.2` (up to 5):

```
1fec1cc chore: checkpoint before enduring SoM extratction
e8e197e chore: checkpoint before implementing labels subcommand (safe state post-full)
8eea5b1 chore: checkpoint before Copilot interventions
c1fef18 chore(makefile): stabilize ETL → AI → NB2 workflow targets
92dc97d chore: reorganize notebooks into notebooks/legacy and update .gitignore
```

---
_Generated by automation on 2025-10-29 UTC — release draft v3.0.3._
